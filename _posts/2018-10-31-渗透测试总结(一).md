---
layout:     post
title:      渗透测试总结(一)
subtitle:   渗透测试
date:       2018-10-31				# 时间
author:     sh1llc0de					# 作者
catalog: true 						# 是否归档
tags:								#标签
    - 渗透测试
---


### 是否存在CDN
#### 验证是否存在CDN
- 方法一:
直接ping即可，大部分域名可以查询。就拿baidu来测试吧。输入`ping www.baidu.com`然后看它的响应的第一行即可。  
![](http://p0.qhimg.com/t01ca4c4fa9e6a1f299.png)  
如果返回的地址是一样的,那么说明没有CDN，这个就代表有CDN。我们再来测试一个容易看出来的。
![](http://p0.qhimg.com/t01269995b590d4168f.png)  
这个返回就很容易看出来了。

- 方法二:
采用多地ping的方式来判断是否存在CDN。这个方法还是最为有效的。多地ping的网址的话其实挺多的。一般用站长工具的就行了。
![](http://p0.qhimg.com/t01a31d8daccc839528.png)
结果:
![](http://p0.qhimg.com/t0193fd1b64aa082e14.png)

- 方法三:
使用nslookup进行判断，如果返回域名解析对应了多个ip，则可能证明使用了CDN,准确率现在不是很高了。所以不推荐使用。
如图，我测试百度就发现它没有使用CDN，这是不合理的。所以再次强调不推荐使用。
![](http://p0.qhimg.com/t01ae437048b3ec4c46.png)  
存在CDN响应:
  ```
    >nslookup www.163.com
    服务器:  192.168.1.1
    Address:  192.168.1.1

    非权威应答:
    名称:    163.xdwscache.ourglb0.com
    Addresses:  175.154.186.43
              119.6.226.156
    Aliases:  www.163.com
              www.163.com.lxdns.com
  ```
- 方法四
在线工具查看是否存在CDN，可以参考一下站点:
    ```
    http://www.cdnplanet.com/tools/cdnfinder/
    http://www.ipip.net/ip.html
    ```

#### 绕过CDN防护下，寻找网站真实ip
- 1.查询历史DNS记录
查看ip与域名的历史绑定记录。可能会存在使用CDN前的记录，相关的查询网站有:
    ```
    https://x.threatbook.cn/
    https://toolbar.netcraft.com/site_report?url=
    https://viewdns.info/
    ```
- 2.查询网站子域名
一些网站的站长可能只给主站使用了CDN服务，并且有一部分子域名可能是和主站在用一台服务器上。这时，我们就可以利用子域名来获取真实ip了。

- 3.利用网站漏洞
fopen、file_get_contents这些函数，将参数修改成自己服务器的ip，让对方服务器主动连接我们，然后从日志文件中找到对方真实ip

- 4.邮件
在一些网站的注册或找回密码处，一般会存在一个邮件功能，我们可以利用这个邮件功能来获取网站的真实ip。
![](http://p0.qhimg.com/t01aa7fdd016c3fc45a.png)
先点击这个按钮，然后点击查看原文。
![](http://p0.qhimg.com/t01cb3d2e3ebc9c7df7.png)
查看ip地址即可。
![](http://p0.qhimg.com/t0196b5a4c893ba7ee5.png)

- 5.利用ZGRAB绕CDN找真实IP  
    [利用ZGRAB绕CDN找真实IP](https://www.t00ls.net/articles-40631.html)
